<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="xOXmfH6cbEueg1y58kvwRwUdwy5fcv4ohG3D33YBmiI"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>CubeSTEP Payload Processor | Benjamin Navin James</title> <meta name="author" content="Benjamin Navin James"> <meta name="description" content="ESP-32 Microcontroller sub-system component developed to manage the payload of the CubeSTEP satellite. This project included hardware, firmware, and driver development."> <meta name="keywords" content="benjamin navin james, benjamin james, benjamin navin, benjamin, navin, james, cal poly pomona, cal poly, cpp, embedded systems, embedded software, software development, software engineer, computer engineering, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://use.typekit.net/nkq3xet.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/cpp.png"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://benjamin-nav.in/projects/CubeSTEP-Payload/"> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-bold" href="/">Benjamin Navin James</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item subactive"> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/vitae/">Vitae</a> </li> </ul> </div> </div> </nav> </header> <div class="container mb-4"> <div class="post"> <header class="post-header my-3"> <h3 class="post-title">CubeSTEP Payload Processor</h3> <p class="post-subtitle">Academic Research Project, 2023</p> </header> <article> <p>The CubeSat Technology Exploration Program (CubeSTEP) is a joint collaboration between Cal Poly Pomona (CPP) and NASA’s Jet Propulsion Laboratory (JPL). The program recently received $900,000 in funding from NASA to carry out its mission<a href="https://polycentric.cpp.edu/2023/08/nasa-awards-900k-to-cpp-space-defense-tech-and-security-news/" rel="external nofollow noopener" target="_blank">(link)</a>. Our project was presented to the AIAA Science and Technology Forum and Exposition<a href="https://arc.aiaa.org/doi/10.2514/6.2023-1879" rel="external nofollow noopener" target="_blank">(link)</a>. I worked on the program during my ‘23-‘24 school year at CPP.</p> <h4 id="mission-statement">Mission Statement</h4> <ol> <li>Develop a generic, yet fully-featured, CubeSat platform that future CPP projects can use as a foundation to advance their research.</li> <li>Utilize additive manufacturing to allow for custom payloads with minimal modifications to the platform.</li> <li>Develop and test an Oscillating Heat Pipe (OHP) integrated battery case which was provided by JPL.</li> </ol> <h4 id="objective">Objective</h4> <p>The satellite had multiple computer systems that needed to be developed and integrated into the on-board computer (OBC) and the flight software.</p> <ul> <li>Attitude Determination and Control System (ACS)</li> <li>UHF Antenna and Transmitter</li> <li>Electrical Power System (EPS)</li> <li>Payload Processor</li> </ul> <p>My primary assignment had two aspects: to develop the Payload processor (ESP32-Pico-D4) and model its required functionality in the flight software (JPL’s F-Prime) to allow the OBC to interface with the payload.</p> <p>This page will cover my experience developing the firmware for the ESP32 processor. See CubeSTEP Flight Software<a href="/projects/CubeSTEP-Fprime">(link)</a> for information regarding the F-Prime development.</p> <hr> <p>The firmware for the Payload Processor was developed using the PlatformIO extension for VS Code. This extension has all the functionality needed to build and upload code to the ESP32 microprocessor. The ESP32-Pico-D4 development kit was used to test and debug the firmware while the Payload component is being developed. The project’s repository is available on GitHub<a href="https://github.com/23navin/esp32-payload-development" rel="external nofollow noopener" target="_blank">(link)</a>.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/daq-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/daq-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/daq-1400.webp"></source> <img src="/assets/img/daq.jpg" class="img-fluid border border-dark rounded z-depth-1" width="auto" height="auto" title="DAQ" onerror="this.onerror=null; $('.responsive-img-srcset').remove();" oncontextmenu="return false;" draggable="false"> </picture> </figure> <div class="caption"> A prototype of the payload processor being used to control and monitor the payload during testing </div> </div> </div> <p>The assignment of developing the payload processor came with some requirements. It needed to be able to read temperatures from the payload’s temperature sensors, set a power level for a payload element, store and retrieve data on the processor’s onboard memory, transmit and receive data via I2C, and receive operational commands via I2C. To satisfy these specific requirements, certain libraries had to be developed. I was able to achieve some of the requirements by adapting open-source libraries but others had to be built from scratch.</p> <h5 id="core-libraries">Core Libraries</h5> <p>Telemetry (struct)</p> <ul> <li>Stores the payload’s temperatures and heater’s output level at a point in time</li> <li>Has methods to set telemetry data and output the data as a string</li> <li>Designed to hold samples of system temperature for periodical system checks and during experiment</li> <li>Telemetry data will either eventually be transmitted over I2C or stored into a .csv log file</li> </ul> <p>FileCore (class)</p> <ul> <li>Handles the internal flash storage over SPI</li> <li>Has methods to create, write to, and read from a .csv file</li> </ul> <p>SensorCore (class)</p> <ul> <li>Sample temperature values from 16 thermistors using on-board ADC</li> <li>Can write data directly to a Telemetry struct via pointer.</li> </ul> <p>HeaterCore (class)</p> <ul> <li>Creates a PWM output at a GPIO to control a payload element</li> <li>Uses two timers to create a Trailing-Edge PWM signal that has a period of 12 seconds</li> <li>The duty cycle and period can be set as needed by the experimen</li> </ul> <p>I2cCore (class)</p> <ul> <li>Allows the OBC to communicate with the payload processor via I2C</li> <li>The ESP32 acts as the slave</li> <li>ESP32 expects telemetry data requests and commands to start and control the experiment</li> </ul> <h5 id="bringing-it-all-together">Bringing it all together</h5> <p>With the libraries developed to provide the core functionality, the next step is to tie it all together into a functioning system using FreeRTOS. Once the system is working as intended, a C++ driver will be developed for easy integration into the flight software on the OBC.</p> </article> </div> </div> <footer class="sticky-bottom &lt;!--mt-5--&gt;"> <div class="container"> <span class="line"> © Copyright 2023 Benjamin Navin James. </span>  <span class="line"> Last updated 27 August 2023. </span> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js"></script> <script defer src="/assets/js/common.js"></script> <script defer src="/assets/js/copy_code.js" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-MXYJPYHPRL"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MXYJPYHPRL");</script> </body> </html>